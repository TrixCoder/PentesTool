#!/bin/bash

# Function to check if OpenVPN is running
is_openvpn_running() {
    pgrep openvpn > /dev/null 2>&1
    return $?
}

# Prompt for sudo password at the beginning
sudo -v

while true; do
    # Display menu
    echo "Please choose an option:"
    echo "1. Connect/Disconnect OpenVPN"
    echo "2. Steghide operations"
    echo "3. Display date and time"
    echo "4. List files in current directory"
    echo "5. Display the current directory"
    echo "6. Exit"

    read -p "Enter your choice (1-6): " choice

    case $choice in
        1)
            if is_openvpn_running; then
                echo "Disconnecting from OpenVPN..."
                sudo killall openvpn
                if [ $? -eq 0 ]; then
                    echo "Disconnected from OpenVPN."
                else
                    echo "Failed to disconnect from OpenVPN."
                fi
            else
                ./commands/openvpn.sh
            fi
            ;;
        2)
            ./commands/steghide.sh
            ;;
        3)
            echo "The current date and time is: "
            date
            ;;
        4)
            echo "The files in the current directory are: "
            ls
            ;;
        5)
            echo "The current directory is: "
            pwd
            ;;
        6)
            echo "Exiting..."
            exit 0
            ;;
        *)
            echo "Invalid choice, please enter a number between 1 and 6."
            ;;
    esac

    echo
done
