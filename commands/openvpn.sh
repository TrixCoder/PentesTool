#!/bin/bash

# Check if OpenVPN is installed
if ! command -v openvpn &> /dev/null; then
    echo "OpenVPN is not installed. Please install OpenVPN and try again."
    exit 1
fi

# Find .ovpn files
ovpn_files=$(find ~/ -type f -name "*.ovpn")

if [ -z "$ovpn_files" ]; then
    echo "No .ovpn files found in your home directory."
    exit 1
fi

echo "Please choose an .ovpn file to connect:"
select file in $ovpn_files; do
    if [ -n "$file" ]; then
        echo "You have chosen $file"
        gnome-terminal -- bash -c "sudo openvpn \"$file\"; exec bash" &
        echo "OpenVPN is connecting in a new terminal tab."
        break
    else
        echo "Invalid selection. Please try again."
    fi
done
